/* ChatGPT-Style UI/UX Enhancements */

/* Dynamic highlight color based on selected tool */
:root {
  --highlight-color: rgba(59, 130, 246, 0.3); /* Default blue */

  /* Light mode colors */
  --user-message-bg: #f4f4f4;
  --user-message-text: #1f1f1f;
  --ai-response-text: #1f1f1f;
  --code-inline-bg: #f4f4f4;
  --code-inline-text: #1f1f1f;
  --code-block-bg: #f8f8f8;
  --code-block-border: #e5e5e5;
  --code-header-bg: #f0f0f0;
  --code-header-border: #e0e0e0;
  --code-language-text: #1f1f1f;
  --copy-button-text: #6b7280;
  --copy-button-hover-bg: #e5e5e5;
  --copy-button-hover-text: #1f1f1f;
  --input-container-bg: #f4f4f4;
  --input-container-border: rgba(0, 0, 0, 0.1);
  --input-container-focus-border: rgba(0, 0, 0, 0.2);
  --input-text: #1f1f1f;
  --input-placeholder: #6b7280;
  --button-text: #6b7280;
  --button-hover-bg: #e5e5e5;
  --button-hover-text: #1f1f1f;
  --disclaimer-text: #6b7280;
  --strong-text: #1f1f1f;
  --streaming-cursor: #1f1f1f;
  --scrollbar-track: #f0f0f0;
  --scrollbar-thumb: #d4d4d4;
  --scrollbar-thumb-hover: #b8b8b8;

  /* Syntax highlighting - Light mode */
  --syntax-keyword: #af00db;
  --syntax-string: #0a7d00;
  --syntax-function: #795e26;
  --syntax-comment: #6a9955;
  --syntax-number: #098658;
  --syntax-operator: #383a42;
  --syntax-punctuation: #383a42;
  --syntax-class-name: #0184bc;
  --syntax-variable: #001080;
  --code-text: #1f1f1f;

  /* Table colors - Light mode */
  --table-bg: #ffffff;
  --table-border: #e5e7eb;
  --table-hover-bg: #f9fafb;
}

.dark {
  /* Dark mode colors */
  --user-message-bg: #15171a;
  --user-message-text: #ffffff;
  --ai-response-text: #ececec;
  --code-inline-bg: #15171a;
  --code-inline-text: #e5e5e5;
  --code-block-bg: #050505;
  --code-block-border: #15171a;
  --code-header-bg: #15171a;
  --code-header-border: #0e1012;
  --code-language-text: #ffffff;
  --copy-button-text: #c5ccd4;
  --copy-button-hover-bg: #1b1f21;
  --copy-button-hover-text: #ffffff;
  --input-container-bg: #2f2f2f;
  --input-container-border: rgba(255, 255, 255, 0.1);
  --input-container-focus-border: rgba(255, 255, 255, 0.2);
  --input-text: #ececec;
  --input-placeholder: #8e8e8e;
  --button-text: #8e8e8e;
  --button-hover-bg: #3d3d3d;
  --button-hover-text: #ffffff;
  --disclaimer-text: #8e8e8e;
  --strong-text: #ffffff;
  --streaming-cursor: #ffffff;
  --scrollbar-track: #1e1e1e;
  --scrollbar-thumb: #3d3d3d;
  --scrollbar-thumb-hover: #4d4d4d;

  /* Syntax highlighting - Dark mode (matching screenshot) */
  --syntax-keyword: #4fc1ff;
  --syntax-string: #4ec9b0;
  --syntax-function: #ff6b6b;
  --syntax-comment: #858585;
  --syntax-number: #b5cea8;
  --syntax-operator: #d4d4d4;
  --syntax-punctuation: #d4d4d4;
  --syntax-class-name: #ff6b9d;
  --syntax-variable: #ff6b9d;
  --code-text: #d4d4d4;

  /* Table colors - Dark mode */
  --table-bg: #2a2a2a;
  --table-border: #3f3f46;
  --table-hover-bg: #333333;
}

[data-selected-tool='web_search'] {
  --highlight-color: rgba(59, 130, 246, 0.3); /* Blue */
}

[data-selected-tool='news_search'] {
  --highlight-color: rgba(249, 115, 22, 0.3); /* Orange */
}

[data-selected-tool='crypto_data'] {
  --highlight-color: rgba(16, 185, 129, 0.3); /* Green */
}

[data-selected-tool='vector_search'] {
  --highlight-color: rgba(139, 92, 246, 0.3); /* Purple */
}

/* Apply highlight color to text selection */
::selection {
  background-color: var(--highlight-color);
  color: #ffffff;
}

::-moz-selection {
  background-color: var(--highlight-color);
  color: #ffffff;
}

/* User Message Bubble - Rounded pill */
.chatgpt-user-message {
  background: var(--user-message-bg);
  color: var(--user-message-text);
  border-radius: 1.5rem;
  padding: 0.875rem 1.25rem;
  font-size: 0.9375rem;
  line-height: 1.6;
  max-width: 70%;
  width: fit-content;
  margin-left: auto;
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
}

/* AI Response Container - Clean background */
.chatgpt-ai-response {
  background: transparent;
  color: var(--ai-response-text);
  padding: 1.5rem 0;
  font-size: 0.9375rem;
  line-height: 1.75;
  max-width: 100%;
}

/* Inline code styling */
.chatgpt-ai-response code:not(pre code) {
  background: var(--code-inline-bg);
  color: var(--code-inline-text);
  padding: 0.125rem 0.375rem;
  border-radius: 0.25rem;
  font-size: 0.875em;
  font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Fira Code', monospace;
}

/* Code block container */
.chatgpt-code-block {
  background: var(--code-block-bg);
  border-radius: 1rem;
  margin: 1rem 0;
  overflow: hidden;
  border: 1px solid var(--code-block-border);
}

/* Code block header */
.chatgpt-code-header {
  background: var(--code-header-bg);
  padding: 0.5rem 1rem;
  display: flex;
  justify-content: space-between;
  align-items: center;
  border-bottom: 1px solid var(--code-header-border);
}

.chatgpt-code-language {
  color: var(--code-language-text);
  font-size: 0.75rem;
  font-weight: 500;
  text-transform: lowercase;
  font-family: 'SF Mono', 'Monaco', 'Inconsolata', monospace;
}

.chatgpt-copy-button {
  background: transparent;
  color: var(--copy-button-text);
  border: none;
  padding: 0.25rem 0.5rem;
  border-radius: 0.25rem;
  font-size: 0.75rem;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 0.375rem;
  transition: all 0.2s ease;
}

.chatgpt-copy-button:hover {
  background: var(--copy-button-hover-bg);
  color: var(--copy-button-hover-text);
  border-radius: 1rem;
}

/* Code block content */
.chatgpt-code-content {
  padding: 1rem;
  overflow-x: auto;
  font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Fira Code', monospace;
  font-size: 0.875rem;
  line-height: 1.5;
  color: var(--code-text);
}

.chatgpt-code-content pre {
  margin: 0;
  padding: 0;
  background: transparent;
  color: var(--code-text);
}

.chatgpt-code-content code {
  color: var(--code-text);
}

/* Syntax highlighting colors - Adaptive for Light/Dark mode */
.chatgpt-code-content .token.keyword {
  color: var(--syntax-keyword);
}

.chatgpt-code-content .token.string {
  color: var(--syntax-string);
}

.chatgpt-code-content .token.function {
  color: var(--syntax-function);
}

.chatgpt-code-content .token.comment {
  color: var(--syntax-comment);
  font-style: italic;
}

.chatgpt-code-content .token.number {
  color: var(--syntax-number);
}

.chatgpt-code-content .token.operator {
  color: var(--syntax-operator);
}

.chatgpt-code-content .token.punctuation {
  color: var(--syntax-punctuation);
}

.chatgpt-code-content .token.class-name {
  color: var(--syntax-class-name);
}

.chatgpt-code-content .token.variable {
  color: var(--syntax-variable);
}

/* Plain text in code blocks (no token class) */
.chatgpt-code-content .token.plain,
.chatgpt-code-content .token.plain-text,
.chatgpt-code-content .plain {
  color: var(--code-text);
}

/* Ensure all text nodes inherit the code text color */
.chatgpt-code-content * {
  color: inherit;
}

/* Expandable code block indicator */
.chatgpt-expand-indicator {
  position: absolute;
  bottom: 0.5rem;
  left: 50%;
  transform: translateX(-50%);
  background: var(--code-header-bg);
  border-radius: 1rem;
  padding: 0.25rem 0.75rem;
  display: flex;
  align-items: center;
  gap: 0.25rem;
  cursor: pointer;
  transition: all 0.2s ease;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
}

.chatgpt-expand-indicator:hover {
  background: var(--button-hover-bg);
  transform: translateX(-50%) translateY(-2px);
}

/* Input area styling */
.chatgpt-input-container {
  background: var(--input-container-bg);
  border-radius: 1.5rem;
  padding: 0.75rem 1rem;
  display: flex;
  align-items: center;
  gap: 0.75rem;
  box-shadow: 0 0 0 1px var(--input-container-border);
  transition: all 0.2s ease;
}

.chatgpt-input-container:focus-within {
  box-shadow: 0 0 0 2px var(--input-container-focus-border);
}

.chatgpt-input {
  flex: 1;
  background: transparent;
  border: none;
  outline: none;
  color: var(--input-text);
  font-size: 0.9375rem;
  resize: none;
  max-height: 200px;
}

.chatgpt-input::placeholder {
  color: var(--input-placeholder);
}

/* Plus button for attachments */
.chatgpt-plus-button {
  background: transparent;
  border: none;
  color: var(--button-text);
  cursor: pointer;
  padding: 0.5rem;
  border-radius: 0.5rem;
  transition: all 0.2s ease;
  display: flex;
  align-items: center;
  justify-content: center;
}

.chatgpt-plus-button:hover {
  background: var(--button-hover-bg);
  color: var(--button-hover-text);
}

/* Voice input button */
.chatgpt-voice-button {
  background: transparent;
  border: none;
  color: var(--button-text);
  cursor: pointer;
  padding: 0.5rem;
  border-radius: 0.5rem;
  transition: all 0.2s ease;
  display: flex;
  align-items: center;
  justify-content: center;
}

.chatgpt-voice-button:hover {
  background: var(--button-hover-bg);
  color: var(--button-hover-text);
}

.chatgpt-voice-button.active {
  color: #10b981;
  animation: pulse 2s ease-in-out infinite;
}

/* Disclaimer text */
.chatgpt-disclaimer {
  text-align: center;
  color: var(--disclaimer-text);
  font-size: 0.75rem;
  margin-top: 0.5rem;
  padding: 0 1rem;
}

/* Bold text emphasis */
.chatgpt-ai-response strong {
  font-weight: 600;
  color: var(--strong-text);
}

/* Headings in AI response */
.chatgpt-ai-response h1,
.chatgpt-ai-response h2,
.chatgpt-ai-response h3,
.chatgpt-ai-response h4,
.chatgpt-ai-response h5,
.chatgpt-ai-response h6 {
  font-weight: 600;
  color: var(--strong-text);
  margin-top: 1.5rem;
  margin-bottom: 0.75rem;
  line-height: 1.3;
}

.chatgpt-ai-response h1 {
  font-size: 1.5rem;
  border-bottom: 2px solid var(--code-block-border);
  padding-bottom: 0.5rem;
}

.chatgpt-ai-response h2 {
  font-size: 1.25rem;
  border-bottom: 1px solid var(--code-block-border);
  padding-bottom: 0.4rem;
}

.chatgpt-ai-response h3 {
  font-size: 1.125rem;
}

.chatgpt-ai-response h4 {
  font-size: 1rem;
}

.chatgpt-ai-response h5,
.chatgpt-ai-response h6 {
  font-size: 0.9375rem;
}

/* Tables in AI response - ChatGPT style */
.chatgpt-ai-response table {
  width: 100%;
  border-collapse: separate;
  border-spacing: 0;
  margin: 1.5rem 0;
  font-size: 0.9375rem;
  background: transparent;
  border-radius: 0.75rem;
  overflow: hidden;
  border: 1px solid var(--code-block-border);
}

.chatgpt-ai-response thead {
  background: transparent;
}

.chatgpt-ai-response th {
  padding: 1rem 1.25rem;
  text-align: left;
  font-weight: 600;
  color: var(--strong-text);
  border-bottom: 1px solid var(--code-block-border);
  background: transparent;
  font-size: 0.9375rem;
}

.chatgpt-ai-response th:not(:last-child) {
  border-right: 1px solid var(--code-block-border);
}

.chatgpt-ai-response td {
  padding: 1rem 1.25rem;
  border-bottom: 1px solid var(--code-block-border);
  color: var(--ai-response-text);
  line-height: 1.6;
  vertical-align: top;
}

.chatgpt-ai-response td:not(:last-child) {
  border-right: 1px solid var(--code-block-border);
}

.chatgpt-ai-response tbody tr:last-child td {
  border-bottom: none;
}

.chatgpt-ai-response tbody tr {
  transition: background-color 0.15s ease;
}

.chatgpt-ai-response tbody tr:hover {
  background: var(--code-inline-bg);
}

/* First column (Category) styling */
.chatgpt-ai-response td:first-child,
.chatgpt-ai-response th:first-child {
  font-weight: 600;
}

/* Table wrapper for responsive scrolling */
.chatgpt-ai-response .table-wrapper {
  overflow-x: auto;
  margin: 1.5rem 0;
}

/* Responsive table */
@media (max-width: 768px) {
  .chatgpt-ai-response table {
    font-size: 0.875rem;
  }

  .chatgpt-ai-response th,
  .chatgpt-ai-response td {
    padding: 0.75rem 1rem;
  }
}

/* Lists in AI response */
.chatgpt-ai-response ul,
.chatgpt-ai-response ol {
  margin: 0.75rem 0;
  padding-left: 1.5rem;
}

.chatgpt-ai-response li {
  margin: 0.5rem 0;
  line-height: 1.6;
}

.chatgpt-ai-response ul {
  list-style-type: disc;
}

.chatgpt-ai-response ol {
  list-style-type: decimal;
}

.chatgpt-ai-response ul ul,
.chatgpt-ai-response ol ul {
  list-style-type: circle;
}

.chatgpt-ai-response ul ul ul,
.chatgpt-ai-response ol ul ul {
  list-style-type: square;
}

/* Blockquotes in AI response */
.chatgpt-ai-response blockquote {
  margin: 1rem 0;
  padding: 0.75rem 1rem;
  border-left: 4px solid var(--syntax-keyword);
  background: var(--code-inline-bg);
  border-radius: 0 0.5rem 0.5rem 0;
  font-style: italic;
  color: var(--ai-response-text);
}

/* Horizontal rule */
.chatgpt-ai-response hr {
  margin: 1.5rem 0;
  border: none;
  border-top: 1px solid var(--code-block-border);
}

/* Paragraphs */
.chatgpt-ai-response p {
  margin: 0.75rem 0;
}

/* Links */
.chatgpt-ai-response a {
  color: var(--syntax-keyword);
  text-decoration: underline;
  transition: opacity 0.2s ease;
}

.chatgpt-ai-response a:hover {
  opacity: 0.8;
}

/* Emoji support */
.chatgpt-emoji {
  font-family: 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';
}

/* Smooth scrolling for code blocks */
.chatgpt-code-content::-webkit-scrollbar {
  height: 8px;
}

.chatgpt-code-content::-webkit-scrollbar-track {
  background: var(--scrollbar-track);
}

.chatgpt-code-content::-webkit-scrollbar-thumb {
  background: var(--scrollbar-thumb);
  border-radius: 4px;
}

.chatgpt-code-content::-webkit-scrollbar-thumb:hover {
  background: var(--scrollbar-thumb-hover);
}

/* Responsive adjustments */
@media (max-width: 768px) {
  .chatgpt-user-message {
    max-width: 85%;
    width: fit-content;
    font-size: 0.875rem;
  }

  .chatgpt-ai-response {
    font-size: 0.875rem;
  }

  .chatgpt-input {
    font-size: 16px !important; /* Prevent iOS zoom */
  }
}

/* Animation for message appearance */
@keyframes chatgpt-message-appear {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.chatgpt-message-animate {
  animation: chatgpt-message-appear 0.3s ease-out;
}

/* Streaming indicator - removed blinking cursor, only using three dots */
